@{
    ViewData["Title"] = "Yeni Ä°ÅŸlem Ekle";
    
}
@model AddTransactionViewModel;

<!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2 class="mb-1">
                    <i class="fas fa-plus me-2"></i>
                    Yeni Ä°ÅŸlem Ekle
                </h2>
                <p class="text-white-50 mb-0">Gelir veya gider iÅŸlemi ekleyebilirsiniz</p>
            </div>
            <div>
                <a href="/Dashboard" class="btn btn-outline-light">
                    <i class="fas fa-arrow-left me-2"></i>
                    Geri DÃ¶n
                </a>
            </div>
        </div>
    </div>
</div>
<!--Ä°ÅŸlem Ekleme Formu -->
<div class="row justify-content-center">
    <div class="col-lg-8 col-xl-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-edit me-2"></i>
                    Ä°ÅŸlem DetaylarÄ±
                </h5>
            </div>
            
            <div class="card-body">
                <form id="addTransactionForm" method="post" asp-action="Add" asp-controller="Transaction">
                    <!-- Ä°ÅŸlem Tipi -->
                    <div class="mb-4">
                        <label class="form-label">Ä°ÅŸlem Tipi *</label>
                        <div class="row">
                            <div class="col-6">
                                <input type="radio" class="btn-check" asp-for="TransactionType"
                                       id="expenseRadio" value=2 checked>
                                <label class="btn btn-outline-danger w-100 py-3" for="expenseRadio">
                                    <i class="fas fa-arrow-up fa-lg d-block mb-2"></i>
                                    <strong>Gider</strong>
                                    <small class="d-block text-muted">Para Ã§Ä±kÄ±ÅŸÄ±</small>
                                </label>
                            </div>
                            <div class="col-6">
                                <input type="radio" class="btn-check" asp-for="TransactionType" 
                                       id="incomeRadio" value=1>
                                <label class="btn btn-outline-success w-100 py-3" for="incomeRadio">
                                    <i class="fas fa-arrow-down fa-lg d-block mb-2"></i>
                                    <strong>Gelir</strong>
                                    <small class="d-block text-muted">Para giriÅŸi</small>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- HÄ±zlÄ± Tutar ButonlarÄ± -->
                    <div class="mb-4">
                        <label class="form-label">HÄ±zlÄ± Tutar SeÃ§imi</label>
                        <div class="row g-2">
                            <div class="col-3">
                                <button type="button" class="btn btn-outline-secondary w-100" 
                                        onclick="setAmount(10)">â‚º10</button>
                            </div>
                            <div class="col-3">
                                <button type="button" class="btn btn-outline-secondary w-100" 
                                        onclick="setAmount(25)">â‚º25</button>
                            </div>
                            <div class="col-3">
                                <button type="button" class="btn btn-outline-secondary w-100" 
                                        onclick="setAmount(50)">â‚º50</button>
                            </div>
                            <div class="col-3">
                                <button type="button" class="btn btn-outline-secondary w-100" 
                                        onclick="setAmount(100)">â‚º100</button>
                            </div>
                        </div>
                    </div>
                    <!-- Tutar -->
                    <div class="mb-3">
                        <label for="amount" class="form-label">Tutar *</label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text">â‚º</span>
                            <input type="number" class="form-control" id="amount" asp-for="Amount" 
                                   placeholder="0.00" step="0.01" required>
                        </div>
                        <div class="form-text">VirgÃ¼lden sonra 2 basamak girebilirsiniz</div>
                    </div>

                    <!-- Kategori -->
                    <div class="mb-3">
                        <label for="category" class="form-label">Kategori *</label>
                        <select class="form-select form-select-lg" id="category" asp-for="CategoryId" required>
                            <option value="">Kategori seÃ§in...</option>
                            <!-- Gider kategorileri -->
                            <optgroup label="ðŸ“‰ Gider Kategorileri" id="expense-categories">
                                @foreach(var category in Model.ExpenseCategories)
                                {
                                    <option value="@category.Id">@category.Name</option>
                                }
                            </optgroup>
                            <!-- Gelir kategorileri -->
                            <optgroup label="ðŸ“ˆ Gelir Kategorileri" id="income-categories" style="display: none;">
                                @foreach(var category in Model.IncomeCategories)
                                {
                                    <option value="@category.Id">@category.Name</option>
                                }
                            </optgroup>
                        </select>
                    </div>

                    <!-- AÃ§Ä±klama -->
                    <div class="mb-3">
                        <label for="description" class="form-label">AÃ§Ä±klama *</label>
                        <input type="text" class="form-control" id="description" asp-for="Description" 
                               placeholder="Ä°ÅŸlem aÃ§Ä±klamasÄ±..." required>
                        <div class="form-text">Ä°ÅŸleminizi tanÄ±mlayÄ±cÄ± bir aÃ§Ä±klama yazÄ±n</div>
                    </div>

                    <!-- Tarih -->
                    <div class="mb-4">
                        <label for="date" class="form-label">Tarih *</label>
                        <input type="date" class="form-control" id="date" asp-for="TransactionDate" required>
                    </div>

                    

                    <!-- Form ButonlarÄ± -->
                    <div class="row">
                        <div class="col-md-6 mb-2">
                            <a href="/Dashboard" class="btn btn-outline-secondary w-100">
                                <i class="fas fa-times me-2"></i>
                                Ä°ptal
                            </a>
                        </div>
                        <div class="col-md-6 mb-2">
                            <button type="submit" name="action" value="save" class="btn btn-primary w-100" id="saveButton">
                                <i class="fas fa-check me-2"></i>
                                <span class="button-text">Kaydet</span>
                                <span class="button-spinner d-none">
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                    Kaydediliyor...
                                </span>
                            </button>
                        </div>
                        </div>

                        <!-- Kaydet ve Yeni Ekle -->
                        <div class="row mt-2">
                        <div class="col-12">
                            <button type="submit" name="action" value="saveAndNew" class="btn btn-outline-primary w-100">
                                <i class="fas fa-plus me-2"></i>
                                Kaydet ve Yeni Ekle
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Son Ä°ÅŸlemler Ã–nizleme (KÃ¼Ã§Ã¼k Widget) -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="fas fa-clock me-2"></i>
                    Son Eklenen Ä°ÅŸlemler
                </h6>
            </div>
            <div class="card-body">
                <div id="recent-transactions-preview">
                    <div class="text-center py-2">
                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                            <span class="visually-hidden">YÃ¼kleniyor...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script src="~/js/transaction-add.js"></script>
}